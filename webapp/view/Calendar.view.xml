<mvc:View
    controllerName="com.vacaciones.app.controller.Calendar"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:unified="sap.ui.unified"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout"
    height="100%">
    <Page
        showHeader="false"
        enableScrolling="true">
        <content>
            <layout:FixFlex>
                <layout:fixContent>
                    <VBox class="sapUiSmallMargin">
                        <HBox justifyContent="SpaceBetween" alignItems="Center">
                            <VBox>
                                <Avatar
                                    src="{/employeeData/photo}"
                                    displaySize="L"
                                    class="sapUiSmallMarginEnd"/>
                                <ObjectIdentifier
                                    title="{/employeeData/firstName} {/employeeData/lastName}"
                                    text="{/employeeData/department} - {/employeeData/position}"/>
                            </VBox>
                            <HBox>
                                <SegmentedButton
                                    selectedKey="{viewModel>/calendarViewType}"
                                    select=".onCalendarViewTypeChange">
                                    <items>
                                        <SegmentedButtonItem
                                            icon="sap-icon://calendar"
                                            key="Day"
                                            tooltip="{i18n>dayView}"/>
                                        <SegmentedButtonItem
                                            icon="sap-icon://calendar"
                                            key="Week"
                                            tooltip="{i18n>weekView}"/>
                                        <SegmentedButtonItem
                                            icon="sap-icon://calendar"
                                            key="Month"
                                            tooltip="{i18n>monthView}"/>
                                        <SegmentedButtonItem
                                            icon="sap-icon://calendar"
                                            key="Year"
                                            tooltip="{i18n>yearView}"/>
                                    </items>
                                </SegmentedButton>
                                <Button
                                    icon="sap-icon://arrow-left"
                                    press=".onPreviousPeriod"
                                    tooltip="{i18n>previousPeriod}"
                                    class="sapUiTinyMarginBegin"/>
                                <Text
                                    text="{viewModel>/currentPeriodText}"
                                    class="sapUiTinyMarginBegin sapUiTinyMarginEnd"/>
                                <Button
                                    icon="sap-icon://arrow-right"
                                    press=".onNextPeriod"
                                    tooltip="{i18n>nextPeriod}"/>
                            </HBox>
                            <Button
                                text="{i18n>actions}"
                                type="Transparent"
                                press=".onActionsPress"/>
                        </HBox>
                    </VBox>
                </layout:fixContent>
                <layout:flexContent>
                    <unified:PlanningCalendar
                        id="calendar"
                        startDate="{viewModel>/startDate}"
                        rows="{/absenceRequests}"
                        viewKey="{viewModel>/calendarViewType}"
                        appointmentSelect=".onAppointmentSelect"
                        intervalSelect=".onIntervalSelect"
                        showEmptyIntervalHeaders="false"
                        showRowHeaders="true"
                        showWeekNumbers="true">
                        <unified:rows>
                            <unified:PlanningCalendarRow
                                title="{title}"
                                text="{text}"
                                icon="{icon}"
                                appointments="{appointments}">
                                <unified:appointments>
                                    <unified:CalendarAppointment
                                        startDate="{startDate}"
                                        endDate="{endDate}"
                                        title="{title}"
                                        text="{text}"
                                        type="{type}"
                                        icon="{icon}"/>
                                </unified:appointments>
                            </unified:PlanningCalendarRow>
                        </unified:rows>
                    </unified:PlanningCalendar>
                </layout:flexContent>
            </layout:FixFlex>
        </content>
        <footer>
            <Toolbar>
                <Title text="{i18n>absencesByType}" level="H3"/>
                <ToolbarSpacer/>
                <List
                    items="{/absenceTypes}"
                    mode="MultiSelect"
                    includeItemInSelection="true"
                    selectionChange=".onAbsenceTypeFilterChange">
                    <StandardListItem
                        title="{description}"
                        info="{count}"
                        infoState="Information"
                        type="Active">
                        <customData>
                            <core:CustomData
                                key="color"
                                value="{color}"/>
                        </customData>
                    </StandardListItem>
                </List>
            </Toolbar>
        </footer>
    </Page>
</mvc:View>